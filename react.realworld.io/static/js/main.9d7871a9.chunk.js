(this.webpackJsonpmedium_clone=this.webpackJsonpmedium_clone||[]).push([[0],{36:function(e,t,a){e.exports=a(93)},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"signInControls",(function(){return q})),a.d(n,"signUpControls",(function(){return D})),a.d(n,"settingsControls",(function(){return P})),a.d(n,"newArticleControls",(function(){return R})),a.d(n,"commentsControls",(function(){return V}));var r={};a.r(r),a.d(r,"emailHandler",(function(){return B})),a.d(r,"passwordHandler",(function(){return Y})),a.d(r,"usernameHandler",(function(){return z})),a.d(r,"inputHandler",(function(){return M}));var c={};a.r(c),a.d(c,"addDateToFormControls",(function(){return _})),a.d(c,"formIsValid",(function(){return J})),a.d(c,"controlValid",(function(){return Z}));var l={};a.r(l),a.d(l,"validateEmail",(function(){return G})),a.d(l,"validatePassword",(function(){return $})),a.d(l,"validateUsername",(function(){return K}));var o=a(0),i=a.n(o),s=a(31),u=a.n(s),m=a(2),d=a(1),f=a(4),g=(a(41),function(e){var t="information";return e.profile&&(t+=" profile"),e.article&&(t+=" article"),i.a.createElement("section",{className:t},i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"information-wrapper"},e.img?i.a.createElement("img",{src:e.img||"https://png.pngtree.com/png-vector/20190828/ourlarge/pngtree-smile-icon-template-design-smiling-emoticon-vector-logo-on-yellow-background-png-image_1715036.jpg",className:"information-img",alt:"avatar"}):null,e.title?i.a.createElement("h2",{className:"information-title"},e.title||"title"):null,e.subtitle?i.a.createElement("p",{className:"information-subtitle"},e.subtitle||"subtitle"):null,e.icon?i.a.createElement("button",{className:"information-button",onClick:e.onButtonClickHandler||null},i.a.createElement("span",{className:"information-button-icon"},i.a.createElement("i",{className:e.icon})),e.buttonText):null,e.children)))}),b=(a(42),a(43),a(44),function(e){return i.a.createElement("div",{className:"tags-list"},e.tagsList.map((function(t,a){return i.a.createElement("div",{className:"tags-item",key:a,onClick:function(){"function"===typeof e.onClickHandler&&e.onClickHandler(t)}},t||"tag")})))}),p=function(e){return i.a.createElement("aside",{className:"tags"},i.a.createElement("h2",{className:"tags-title"},"Popular tags"),i.a.createElement(b,{onClickHandler:e.onClickHandler,tagsList:e.tagsList}))},E=(a(45),a(46),function(e){return i.a.createElement("div",{className:e.articleFull?"user-meta-item articleFull":"user-meta-item"},i.a.createElement(m.b,{to:"/profile/".concat(e.author.username),className:"user-profile-link"},i.a.createElement("img",{src:e.author.image,alt:"avatar"})),i.a.createElement("div",{className:"user-meta-info"},i.a.createElement(m.b,{to:"/profile/".concat(e.author.username),className:"user-login-name"},e.author.username),i.a.createElement("time",{className:"user-date"},new Date(e.createdAt).toLocaleDateString())),e.children)}),h=Object(o.createContext)([{},function(){}]),v=a(3),j=a(33),O=a.n(j);function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=Object(o.useState)((function(){return localStorage.getItem(e)||t})),n=Object(d.a)(a,2),r=n[0],c=n[1];return Object(o.useEffect)((function(){localStorage.setItem(e,r)}),[r,e]),[r,c]}function C(e){var t="https://conduit.productionready.io/api",a=Object(o.useState)(null),n=Object(d.a)(a,2),r=n[0],c=n[1],l=Object(o.useState)(null),i=Object(d.a)(l,2),s=i[0],u=i[1],m=Object(o.useState)(!1),f=Object(d.a)(m,2),g=f[0],b=f[1],p=Object(o.useState)({}),E=Object(d.a)(p,2),h=E[0],j=E[1],C=N("jwtToken"),w=Object(d.a)(C,1)[0],k=Object(o.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};j(e),b(!0)}),[]);return Object(o.useEffect)((function(){var a=Object(v.a)(Object(v.a)({},h),{headers:{authorization:w?"Token ".concat(w):""}});g&&O()(t+e,a).then((function(e){c(e.data),b(!1)})).catch((function(e){u(e.response.data),b(!1)}))}),[g,t,e,h,w]),[{response:r,error:s,isLoading:g,setResponse:c},k]}var w=Object(f.g)((function(e){var t=Object(o.useContext)(h),a=Object(d.a)(t,1)[0],n=Object(o.useState)(e.favorited),r=Object(d.a)(n,2),c=r[0],l=r[1],s=Object(o.useState)(e.favoritesCount),u=Object(d.a)(s,2),m=u[0],f=u[1],g=C("/articles/".concat(e.slug,"/favorite")),b=Object(d.a)(g,2)[1];return i.a.createElement("button",{className:"article-button-like",style:c?{backgroundColor:"#5cb85c",color:"white"}:{},onClick:function(){a.isLoggedIn?(c?(f((function(e){return e-1})),b({method:"delete"})):(f((function(e){return e+1})),b({method:"post",data:{}})),l((function(e){return!e}))):e.history.push("/login")}},i.a.createElement("span",{className:"like"},i.a.createElement("i",{className:"fas fa-heart"})),e.isFavoriteButton?c?"UnFavorite Article(".concat(m,")"):"Favorite Article(".concat(m,")"):m)})),k=Object(f.g)((function(e){return i.a.createElement("article",{className:"article","data-article-id":e.id},i.a.createElement("div",{className:"article-meta"},i.a.createElement("div",{className:"article-meta-item"},i.a.createElement(E,{author:e.author,createdAt:e.createdAt})),i.a.createElement(w,{slug:e.slug,favorited:e.favorited,favoritesCount:e.favoritesCount})),i.a.createElement(m.b,{to:"/article/".concat(e.slug),className:"article-preview-link"},i.a.createElement("h2",{className:"article-title"},e.title),i.a.createElement("p",{className:"article-text"},e.description),i.a.createElement("div",{className:"article-preview-item"},i.a.createElement("span",null,"Read more..."),i.a.createElement(b,{tagsList:e.tagList}))))})),x=function(e){return i.a.createElement(i.a.Fragment,null,e.articleList.map((function(t,a){return i.a.createElement(k,Object.assign({updateArticles:e.updateArticles,key:a},t))})))},S=(a(69),function(e){return i.a.createElement("div",{className:"tabs"},i.a.createElement("ul",{className:"tabs-list"},e.links.map((function(e,t){var a=e.text,n=void 0===a?"":a,r=e.href,c=void 0===r?"/":r,l=e.exact,o=void 0!==l&&l,s=e.onClick;return i.a.createElement("li",{className:"tabs-item",key:t,onClick:s},i.a.createElement(m.c,{to:c,exact:o,className:"tabs-link"},n))}))))}),H=(a(70),function(){return i.a.createElement("div",{className:"loader-wrapper"},i.a.createElement("div",{className:"lds-roller"},i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null)))}),y=(a(71),function(e){return console.log(e),i.a.createElement("ul",{className:"errors-messages"},Object.keys(e.errors).map((function(t,a){return i.a.createElement("li",{key:a},t+" "+e.errors[t])})))}),L=(a(72),Object(f.g)((function(e){var t=e.limit,a=e.itemsCount,n=e.url,r=e.isLoadingArticles,c=e.history,l=Math.ceil(a/t),i=Object(o.useRef)(1);return Object(o.useEffect)((function(){return document.onscroll=function(){window.pageYOffset+document.documentElement.clientHeight>=document.documentElement.scrollHeight&&i.current<=l&&!r&&(i.current+=1,c.push("".concat(n,"?page=").concat(i.current)))},function(){document.onscroll=null}}),[l,n]),null}))),U=a(15),F=a(14),A=Object(f.g)((function(e){var t=function(e){var t=Object(F.parse)(e),a=t.page?Number(t.page):1;return{currentPage:a,offset:10*a-10}}(e.location.search),a=t.currentPage,n=t.offset,r=Object(F.stringify)({limit:10,offset:n}),c=Object(o.useState)(e.defaultFetchUrl+"limit=".concat(10,"&offset=0")),l=Object(d.a)(c,2),s=l[0],u=l[1],m=C("/tags"),f=Object(d.a)(m,2),g=f[0],b=g.response,E=g.error,h=f[1],v=C(s),j=Object(d.a)(v,2),O=j[0],N=O.response,w=O.error,k=O.isLoading,U=O.setResponse,A=j[1],T=Object(o.useState)([]),I=Object(d.a)(T,2),q=I[0],D=I[1],P=Object(o.useState)(""),R=Object(d.a)(P,2),V=R[0],B=R[1],Y=e.tabsLinkCreator.map((function(e){return{text:e.textLink,href:e.href,exact:e.exact,onClick:function(){u(e.fetchUrl+"limit=".concat(10,"&offset=0")),D([]),U(null),A(),V&&B("")}}}));Object(o.useEffect)((function(){e.isTagsShow&&h(),A()}),[h,A,e.isTagsShow]),Object(o.useEffect)((function(){N&&D((function(e){return e.concat(N.articles)}))}),[N]),Object(o.useEffect)((function(){N&&u((function(e){return(t=e).slice(0,t.indexOf("limit"))+r;var t}))}),[a,A]),Object(o.useEffect)((function(){N&&A()}),[s,A]);return V&&(Y=Y.concat([{text:"#"+V,href:"/",exact:!1,onClick:function(){u("/articles?tag=".concat(V,"&limit=10&offset=0")),D([]),U(null),A()}}])),i.a.createElement("section",{className:"feeds"},i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"feeds-wrapper"},i.a.createElement("div",{className:"feeds-item"},i.a.createElement(S,{links:Y}),i.a.createElement("div",{className:"feed"},i.a.createElement("div",{className:"feed-wrapper"},N?i.a.createElement(x,{articleList:q}):null,N&&!N.articles.length?i.a.createElement("p",{style:{textAlign:"center"}},"No articles are here... yet."):null,k?i.a.createElement(H,null):null,w?i.a.createElement(y,{errors:w.errors}):null,N?i.a.createElement(L,{isLoading:k,itemsCount:N.articlesCount,limit:10,url:e.match.url}):null))),e.isTagsShow?i.a.createElement("div",{className:"feeds-item"},b?i.a.createElement(p,{onClickHandler:function(e){B(e),u("/articles?tag=".concat(e,"&limit=10&offset=0")),D([]),U(null),A()},tagsList:b.tags}):null,E?i.a.createElement(y,{errors:E.errors}):null):null)))})),T=function(e){var t=Object(o.useContext)(h),a=Object(d.a)(t,1)[0],n=[{fetchUrl:"/articles/feed?",textLink:"Your Feed",href:a.isLoggedIn?"/":"/login",exact:!0},{fetchUrl:"/articles?",textLink:"Global Feed",href:"/",exact:!1}];return i.a.createElement(i.a.Fragment,null,a.isLoading||a.isLoggedIn?null:i.a.createElement(g,{title:"medium",subtitle:"A place to share your React knowledge"}),i.a.createElement(A,{defaultFetchUrl:a.isLoggedIn?"/articles/feed?":"/articles?",tabsLinkCreator:n,isTagsShow:!0}))},I=(a(85),function(e){return i.a.createElement("form",{className:"form",onSubmit:e.onSubmitHandler?e.onSubmitHandler:function(e){return e.preventDefault}},i.a.createElement("fieldset",{disabled:e.formDisabled},e.controlsCreate.map((function(e,t){return"input"===e.tag?function(e,t){var a=e.type,n=void 0===a?"text":a,r=e.name,c=void 0===r?"":r,l=e.placeholder,o=void 0===l?"":l,s=e.required,u=void 0===s||s,m=e.onChangeHandler,d=void 0===m?null:m,f=e.value,g=void 0===f?"":f,b=e.validation,p=e.valid,E=e.touched,h=e.isValid;return console.log(g),i.a.createElement("fieldset",{className:"form-group",key:t},i.a.createElement("input",{type:n,className:"form-control",name:c,placeholder:o,required:u,onChange:function(e){E.current=!0,p.current="function"!==typeof b||b(e.target.value),h.current=E.current&&p.current,d(e)},value:g}))}(e,t):"textarea"===e.tag?function(e,t){var a=e.name,n=void 0===a?"":a,r=e.placeholder,c=void 0===r?"":r,l=e.rows,o=void 0===l?8:l,s=e.required,u=void 0===s||s,m=e.onChangeHandler,d=void 0===m?null:m,f=e.value,g=void 0===f?"":f;return i.a.createElement("fieldset",{className:"form-group",key:t},i.a.createElement("textarea",{className:"form-control",name:n,placeholder:c,rows:o,required:u,onChange:function(e){d(e)},value:g}))}(e,t):void 0})),i.a.createElement("button",{className:"form-button",disabled:e.disabled},e.buttonText||"button"),e.children))}),q=[{tag:"input",type:"email",name:"email",placeholder:"Email"},{tag:"input",type:"password",name:"password",placeholder:"Password"}],D=[{tag:"input",type:"text",name:"username",placeholder:"Username"},{tag:"input",type:"email",name:"email",placeholder:"Email"},{tag:"input",type:"password",name:"password",placeholder:"Password"}],P=[{tag:"input",name:"picture",placeholder:"URL of profile picture",required:"false"},{tag:"input",name:"username",placeholder:"Username"},{tag:"textarea",name:"bio",placeholder:"Short bio about you",rows:"8",required:"false"},{tag:"input",name:"email",placeholder:"Email"},{tag:"input",name:"newpassword",placeholder:"New Password",required:"false"}],R=[{tag:"input",name:"title",placeholder:"Article Title"},{tag:"input",name:"about",placeholder:"What`s this article about"},{tag:"textarea",name:"article",placeholder:"Write your article(in markdown)",rows:"8"},{tag:"input",name:"tags",placeholder:"Enter tags"}],V=[{tag:"textarea",name:"comment",placeholder:"Write a commet",rows:"8"}],B=function(e){return function(t){e(t.target.value)}},Y=function(e){return function(t){e(t.target.value)}},z=function(e){return function(t){e(t.target.value)}},M=function(e){return function(t){e(t.target.value)}},W=a(34);function _(e,t){return new Array(e.length).fill("").map((function(a,n){return Object(v.a)(Object(v.a)(Object(v.a)({},e[n]),t[n]),{},{valid:Object(o.useRef)(!1),touched:Object(o.useRef)(!1),isValid:Object(o.useRef)(!1)})}))}function J(e){var t,a=!0,n=Object(W.a)(e);try{for(n.s();!(t=n.n()).done;){a=t.value.isValid.current&&a}}catch(r){n.e(r)}finally{n.f()}return a}function Z(e){for(var t=0;t<e.length;t++)if(e[t].touched.current&&!e[t].isValid.current)return!1;return!0}function G(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function $(e){return!(e.length<8)}function K(e){return!(e.length<5)}var Q=function(e){var t=Object(o.useState)(""),a=Object(d.a)(t,2),l=a[0],s=a[1],u=Object(o.useState)(""),m=Object(d.a)(u,2),f=m[0],g=m[1],b=Object(o.useState)(""),p=Object(d.a)(b,2),E=p[0],h=p[1],v=Object(o.useState)(""),j=Object(d.a)(v,2),O=j[0],N=j[1],w=C("/articles"),k=Object(d.a)(w,2),x=k[0],S=x.response,H=x.error,y=k[1],L=c.addDateToFormControls(n.newArticleControls,[{value:l,onChangeHandler:r.inputHandler(s),required:!0},{value:f,onChangeHandler:r.inputHandler(g),required:!0},{value:E,onChangeHandler:r.inputHandler(h),required:!0},{value:O,onChangeHandler:r.inputHandler(N),required:!1}]);return Object(o.useEffect)((function(){S&&e.history.push("/article/".concat(S.article.slug))}),[S,e.history]),i.a.createElement("section",{className:"auth-login"},i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"auth-login-wrapper"},i.a.createElement("h2",{className:"auth-login-title"},"Your Article"),i.a.createElement("span",{className:"auth-login-error"},H?H.errors.toString():null),i.a.createElement(I,{onSubmitHandler:function(e){e.preventDefault(),y({method:"post",data:{article:{tagList:O.split(",")||[],title:l,description:f,body:E}}})},buttonText:"Publish Article",controlsCreate:L}))))},X=(a(86),function(e){var t=Object(o.useContext)(h),a=Object(d.a)(t,2),s=a[0],u=a[1],m=Object(o.useState)(""),f=Object(d.a)(m,2),g=f[0],b=f[1],p=Object(o.useState)(""),E=Object(d.a)(p,2),j=E[0],O=E[1],w=Object(o.useState)(""),k=Object(d.a)(w,2),x=k[0],S=k[1],H=Object(o.useState)(""),y=Object(d.a)(H,2),L=y[0],U=y[1],F=Object(o.useState)(""),A=Object(d.a)(F,2),T=A[0],q=A[1],D=C("/user"),P=Object(d.a)(D,2),R=P[0],V=(R.response,R.error),B=(R.isLoading,P[1]),Y=N("jwtToken");Object(d.a)(Y,2)[1];Object(o.useEffect)((function(){s.currentUser&&(S(s.currentUser.username),O(s.currentUser.email),U(s.currentUser.bio),b(s.currentUser.image||""),B({method:"put",data:{user:Object(v.a)({},s.currentUser)}}))}),[s,B]);var z=c.addDateToFormControls(n.settingsControls,[{value:g,onChangeHandler:r.inputHandler(b),required:!1},{value:x,onChangeHandler:r.usernameHandler(S),validation:l.validateUsername,required:!1},{value:L,onChangeHandler:r.emailHandler(U),required:!1},{value:j,onChangeHandler:r.emailHandler(O),validation:l.validateEmail,required:!1},{value:T,onChangeHandler:r.passwordHandler(q),validation:l.validatePassword,required:!0}]);return i.a.createElement("section",{className:"auth-login"},i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"auth-login-wrapper"},i.a.createElement("h2",{className:"auth-login-title"},"Your Settings"),i.a.createElement("span",{className:"auth-login-error"},V?V.errors.toString():null),i.a.createElement(I,{onSubmitHandler:function(t){t.preventDefault(),u((function(e){return Object(v.a)(Object(v.a)({},e),{},{currentUser:Object(v.a)(Object(v.a)({},e.currentUser),{},{password:T,bio:L,image:g,email:j,username:x})})})),e.history.push("/profile/".concat(s.currentUser.username))},buttonText:"Update Settings",controlsCreate:z},i.a.createElement("hr",null),i.a.createElement("button",{type:"button",onClick:function(){localStorage.setItem("jwtToken",""),u({isLoggedIn:null,isLoading:!1,currentUser:null}),e.history.push("/")},className:"logout"},"Or click here to logout")))))}),ee=Object(f.g)((function(e){var t=Object(o.useContext)(h),a=Object(d.a)(t,1)[0],n=Object(o.useState)(e.following),r=Object(d.a)(n,2),c=r[0],l=r[1],s=C("/profiles/".concat(e.username,"/follow")),u=Object(d.a)(s,2)[1];return i.a.createElement("button",{onClick:function(){a.isLoggedIn?(u(c?{method:"delete"}:{method:"post",data:{}}),l((function(e){return!e}))):e.history.push("/login")},className:"information-button"},i.a.createElement("span",{className:"information-button-icon"},i.a.createElement("i",{className:"fas fa-plus"})),c?"Unfollow ".concat(e.username," "):"Follow ".concat(e.username))})),te=function(e){var t=Object(o.useContext)(h),a=Object(d.a)(t,1)[0],n=Object(o.useState)(!1),r=Object(d.a)(n,2),c=r[0],l=r[1],s=e.match.params.username,u=C("/profiles/".concat(s)),m=Object(d.a)(u,2),f=m[0].response,b=m[1],p="/articles?author=".concat(s,"&"),E="/articles?favorited=".concat(s,"&"),v={icon:"fas fa-cog",buttonText:"Edit Settings",onButtonClickHandler:function(){return e.history.push("/settings")}},j=[{fetchUrl:p,textLink:"My Posts",href:"/profile/".concat(s),exact:!0},{fetchUrl:E,textLink:"Favorited Posts",href:"/profile/".concat(s,"/favorites"),exact:!1}];return Object(o.useEffect)((function(){a.currentUser&&l(s===a.currentUser.username)}),[a.currentUser]),Object(o.useEffect)((function(){b()}),[]),i.a.createElement(i.a.Fragment,null,f&&!c?i.a.createElement(g,{img:f.profile.image,title:f.profile.username,subtitle:f.profile.bio,profile:!0},i.a.createElement(ee,{username:e.match.params.username,following:f.profile.following})):null,f&&c?i.a.createElement(g,Object.assign({img:f.profile.image,title:f.profile.username,subtitle:f.profile.bio,profile:!0},v)):null,i.a.createElement(A,{tabsLinkCreator:j,defaultFetchUrl:p}))},ae=(a(87),a(35)),ne=(a(88),function(e){var t=Object(o.useState)(!1),a=Object(d.a)(t,2),n=a[0],r=a[1],c=C("/articles/".concat(e.slug,"/comments/").concat(e.id)),l=Object(d.a)(c,2)[1];return Object(o.useEffect)((function(){n&&l({method:"delete"})}),[n,l]),i.a.createElement("span",{onClick:function(){return r(!0)}},i.a.createElement("i",{className:"fas fa-trash-alt"}))}),re=Object(f.g)((function(e){var t=e.comment,a=Object(ae.a)(e,["comment"]),n=Object(o.useContext)(h),r=Object(d.a)(n,1)[0];return i.a.createElement("div",{className:"comment"},i.a.createElement("div",{className:"comment-block"},i.a.createElement("p",{className:"comment-text"},t.body)),i.a.createElement("div",{className:"comment-footer"},i.a.createElement(E,{author:t.author,createdAt:t.createdAt}),r.currentUser.username===t.author.username?i.a.createElement(ne,{slug:a.match.params.slug,id:t.id}):null))})),ce=function(e){return i.a.createElement(i.a.Fragment,null,e.comments.map((function(e,t){return i.a.createElement(re,{comment:e,index:t,key:t})})))},le=function(e){var t=Object(o.useContext)(h),a=Object(d.a)(t,1)[0],l=C("/articles/".concat(e.match.params.slug)),s=Object(d.a)(l,2),u=s[0].response,f=s[1],p=C("/articles/".concat(e.match.params.slug,"/comments")),v=Object(d.a)(p,2),j=v[0].response,O=v[1],N=Object(o.useState)(""),k=Object(d.a)(N,2),x=k[0],S=k[1],y=Object(o.useState)([]),L=Object(d.a)(y,2),F=L[0],A=L[1],T=Object(o.useState)(!1),q=Object(d.a)(T,2),D=q[0],P=q[1],R=c.addDateToFormControls(n.commentsControls,[{value:x,onChangeHandler:r.inputHandler(S),required:!1}]);Object(o.useEffect)((function(){f(),O({method:"get"})}),[O,f]),Object(o.useEffect)((function(){j&&(Array.isArray(j.comments)&&A(j.comments),j.comment&&A((function(e){return[j.comment].concat(Object(U.a)(e))})))}),[j,O]),Object(o.useEffect)((function(){u&&D&&(O({method:"post",data:{body:x}}),P(!1),S(""))}),[D,P,O]);return i.a.createElement(i.a.Fragment,null,u?i.a.createElement(g,{article:"true",title:u.article.title,buttonText:"Follow Darktime"},i.a.createElement(E,{articleFull:"true",author:u.article.author,createdAt:u.article.createdAt},i.a.createElement(ee,{username:u.article.author.username,following:u.article.author.following}),i.a.createElement(w,{slug:e.match.params.slug,favorited:u.article.favorited,favoritesCount:u.article.favoritesCount,isFavoriteButton:!0}))):i.a.createElement(H,null),u?i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"articleFull-wrapper"},i.a.createElement("article",{className:"article"},u.article.body,i.a.createElement(b,{tagsList:u.article.tagList})),i.a.createElement("hr",null),i.a.createElement(E,{author:u.article.author,createdAt:u.article.createdAt},i.a.createElement(ee,{username:u.article.author.username,following:u.article.author.following}),i.a.createElement(w,{slug:e.match.params.slug,favorited:u.article.favorited,favoritesCount:u.article.favoritesCount,isFavoriteButton:!0})),i.a.createElement("div",{className:"articlFull-comments-wrapper"},a.isLoggedIn?i.a.createElement(I,{onSubmitHandler:function(e){e.preventDefault(),P(!0)},controlsCreate:R,buttonText:"Post Comment"}):i.a.createElement("p",{style:{paddingTop:50}},i.a.createElement(m.b,{to:"/login",style:{color:"#5cb85c"}},"Sign in "),"or",i.a.createElement(m.b,{to:"/register",style:{color:"#5cb85c"}}," sign up")," to add comments on this article."),F.length?i.a.createElement(ce,{comments:F}):null))):null)},oe=(a(89),a(90),function(e){return i.a.createElement("ul",{className:"nav-list"},e.links.map((function(e,t){return e.icon?function(e,t){var a=e.text,n=e.href,r=e.icon;return i.a.createElement("li",{className:"nav-item",key:t},i.a.createElement("span",null,i.a.createElement("i",{className:r})),i.a.createElement(m.c,{to:n,className:"nav-link"},a))}(e,t):function(e,t){var a=e.text,n=e.href;return i.a.createElement("li",{className:"nav-item",key:t},i.a.createElement(m.c,{to:n,exact:!0,className:"nav-link"},a))}(e,t)})))}),ie=function(e){return i.a.createElement("header",null,i.a.createElement("nav",{className:"nav"},i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"nav-wrapper"},i.a.createElement(m.b,{to:"/",className:"nav-brand"},e.brand||"medium"),i.a.createElement(oe,{links:e.links})))))},se=function(){return i.a.createElement(ie,{links:[{text:"Home",href:"/"},{text:"Sign in",href:"/login"},{text:"Sign up",href:"/register"}]})},ue=function(e){console.log(e);var t=[{text:"Home",href:"/"},{text:"New Article",icon:"far fa-edit",href:"/editor"},{text:"Settings",icon:"fas fa-cog",href:"/settings"},{text:e.username,href:"/profile/"+e.username}];return i.a.createElement(ie,{links:t})},me=(a(91),function(e){var t="/login"===e.match.path,a=t?"Sign In":"Sign Up",s=t?"/register":"/login",u=t?"Need a account":"Have an account",m=t?"/users/login":"/users",g=Object(o.useState)(""),b=Object(d.a)(g,2),p=b[0],E=b[1],j=Object(o.useState)(""),O=Object(d.a)(j,2),w=O[0],k=O[1],x=Object(o.useState)(""),S=Object(d.a)(x,2),H=S[0],L=S[1],U=C(m),F=Object(d.a)(U,2),A=F[0],T=A.response,q=A.isLoading,D=A.error,P=F[1],R=Object(o.useState)(!1),V=Object(d.a)(R,2),B=V[0],Y=V[1],z=N("jwtToken"),M=Object(d.a)(z,2)[1],W=Object(o.useContext)(h),_=Object(d.a)(W,2)[1],J=c.addDateToFormControls(n.signInControls,[{value:w,onChangeHandler:r.emailHandler(k),validation:l.validateEmail},{value:H,onChangeHandler:r.passwordHandler(L),validation:l.validatePassword}]),Z=c.addDateToFormControls(n.signUpControls,[{value:p,onChangeHandler:r.usernameHandler(E),validation:l.validateUsername},{value:w,onChangeHandler:r.emailHandler(k),validation:l.validateEmail},{value:H,onChangeHandler:r.passwordHandler(L),validation:l.validatePassword}]),G=t?J:Z;return Object(o.useEffect)((function(){T&&(M(T.user.token),Y(!0),_((function(e){return Object(v.a)(Object(v.a)({},e),{},{isLoggedIn:!0,isLoading:!1,currentUser:T.user})})))}),[T,M,_]),B?i.a.createElement(f.a,{to:"/"}):i.a.createElement("section",{className:"auth-login"},i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"auth-login-wrapper"},i.a.createElement("h2",{className:"auth-login-title"},a),i.a.createElement("p",{className:"auth-login-subtitle"},i.a.createElement("a",{href:s,className:"auth-login-register"},u,"?")),i.a.createElement("span",{className:"auth-login-error"},c.controlValid(G)?"":"\u0412\u044b \u0432\u0432\u0435\u043b\u0438 \u043d\u0435 \u0432\u0435\u0440\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435",D?i.a.createElement(y,{errors:D.errors}):null),i.a.createElement(I,{onSubmitHandler:function(e){var a=t?{method:"post",data:{user:{email:w,password:H}}}:{method:"post",data:{user:{email:w,username:p,password:H}}};e.preventDefault(),P(a)},buttonText:a,disabled:!c.formIsValid(G),formDisabled:q,controlsCreate:G}))))}),de=function(){var e=Object(o.useContext)(h),t=Object(d.a)(e,1)[0];return i.a.createElement(i.a.Fragment,null,t.isLoggedIn&&!t.isLoading?i.a.createElement(ue,{username:t.currentUser.username}):i.a.createElement(se,null),i.a.createElement(f.d,null,i.a.createElement(f.b,{path:"/",exact:!0,component:T}),i.a.createElement(f.b,{path:"/login",component:me}),i.a.createElement(f.b,{path:"/register",component:me}),i.a.createElement(f.b,{path:"/editor",component:Q}),i.a.createElement(f.b,{path:"/settings",component:X}),i.a.createElement(f.b,{path:"/profile/:username",component:te}),i.a.createElement(f.b,{path:"/article/:slug",component:le}),i.a.createElement(f.a,{to:"/"})))},fe=(a(92),function(e){var t=e.children,a=Object(o.useState)({isLoading:!1,isLoggedIn:null,currentUser:null}),n=Object(d.a)(a,2),r=n[0],c=n[1];return i.a.createElement(h.Provider,{value:[r,c]},t)}),ge=function(e){var t=e.children;return i.a.createElement(fe,null,t)},be=function(e){var t=e.children,a=C("/user"),n=Object(d.a)(a,2),r=n[0].response,c=n[1],l=Object(o.useContext)(h),i=Object(d.a)(l,2)[1],s=N("jwtToken"),u=Object(d.a)(s,1)[0];return Object(o.useEffect)((function(){u?(c(),i((function(e){return Object(v.a)(Object(v.a)({},e),{},{isLoading:!0})}))):i((function(e){return Object(v.a)(Object(v.a)({},e),{},{isLoggedIn:!1})}))}),[u,i,c]),Object(o.useEffect)((function(){r&&i((function(e){return Object(v.a)(Object(v.a)({},e),{},{isLoading:!1,isLoggedIn:!0,currentUser:r.user})}))}),[r,i]),t},pe=function(){return i.a.createElement(ge,null,i.a.createElement(be,null,i.a.createElement(m.a,null,i.a.createElement(de,null))))};u.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(pe,null)),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.9d7871a9.chunk.js.map